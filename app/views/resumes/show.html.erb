<div class="resume-container position-relative">
  <!-- HERO (titre + r√©sum√©) -->
  <section class="band-hero py-5">
    <div class="container text-center">
      <!-- Bouton retour coin gauche (plus proche du bord + plus petit) -->
      <div class="position-absolute" style="top: 15px; left: 15px;">
        <%= link_to "‚¨Ö Retour", root_path, class: "btn-pill btn-ghost btn-sm px-3 py-1" %>
      </div>
      <h1 class="hero-title mb-3"><%= @resume.title %></h1>
      <% if @resume.summary.present? %>
        <p class="hero-text mx-auto" style="max-width: 720px;"><%= simple_format(@resume.summary) %></p>
      <% end %>
    </div>
  </section>
  <!-- PDF -->
  <% if @resume.pdf.attached? %>
    <section class="band-surface text-center py-4">
      <%= link_to "üìÑ T√©l√©charger mon CV (English version)", url_for(@resume.pdf),
                  target: "_blank", class: "btn-pill btn-primary" %>
    </section>
  <% end %>
  <!-- EXP√âRIENCES (TIMELINE) -->
  <section class="band-surface-alt py-5">
    <div class="container">
      <h2 class="mb-4">üíº Exp√©riences</h2>
      <div class="border-start border-3 border-primary ps-4">
        <% @resume.experiences.each do |exp| %>
          <div class="mb-4">
            <div class="d-flex align-items-baseline">
              <i class="fa-solid fa-circle fa-xs text-primary me-2"></i>
              <h5 class="fw-bold mb-1"><%= exp.title %></h5>
            </div>
            <p class="mb-1">
              <strong><%= exp.company %></strong> ‚Äî
              <%= exp.start_date&.strftime("%Y") %> - <%= exp.end_date&.strftime("%Y") || "Pr√©sent" %>
            </p>
            <p class="mb-0"><%= exp.description %></p>
            <div class="d-flex mt-2">
              <% if user_signed_in? && current_user.admin? %>
                <%= link_to "‚úèÔ∏è", edit_experience_path(exp), class: "btn me-2" %>
                <%= link_to "üóë ", experience_path(exp),
                      data: { "turbo-method": :delete, "turbo-confirm": "Supprimer cette exp√©rience ?" },
                      class: "btn" %>
              <% end %>
            </div>
          </div>
        <% end %>
      </div>
      <div class="mt-3">
        <% if user_signed_in? && current_user.admin? %>
          <%= link_to "‚ûï Ajouter une exp√©rience", new_experience_path, class: "btn btn-success" %>
        <% end %>
      </div>
    </div>
  </section>
  <!-- FORMATIONS (TIMELINE) -->
  <section class="band-surface py-5">
    <div class="container">
      <h2 class="mb-4">üéì Formations</h2>
      <div class="border-start border-3 border-primary ps-4">
        <% @resume.educations.each do |edu| %>
          <div class="mb-4">
            <div class="d-flex align-items-baseline">
              <i class="fa-solid fa-circle fa-xs text-primary me-2"></i>
              <h5 class="fw-bold mb-1"><%= edu.degree %></h5>
            </div>
            <p class="mb-1">
              <strong><%= edu.school %></strong> ‚Äî
              <%= edu.start_date&.strftime("%Y") %> - <%= edu.end_date&.strftime("%Y") || "En cours" %>
            </p>
            <p class="mb-0"><%= edu.description %></p>
            <div class="d-flex mt-2">
              <% if user_signed_in? && current_user.admin? %>
                <%= link_to "‚úèÔ∏è", edit_education_path(edu), class: "btn me-2" %>
                <%= link_to "üóë ", education_path(edu),
                      data: { "turbo-method": :delete, "turbo-confirm": "Supprimer cette formation ?" },
                      class: "btn" %>
              <% end %>
            </div>
          </div>
        <% end %>
      </div>
      <div class="mt-3">
        <% if user_signed_in? && current_user.admin? %>
          <%= link_to "‚ûï Ajouter une formation", new_education_path, class: "btn btn-success" %>
        <% end %>
      </div>
    </div>
  </section>
  <!-- COMP√âTENCES -->
  <section class="band-surface-alt py-5">
    <div class="container">
      <h2 class="mb-4">üõ†Ô∏è Comp√©tences</h2>
      <div class="skills-container d-flex flex-wrap">
        <% @resume.skills.each do |skill| %>
          <div class="skill-wrapper position-relative m-2">
            <% if user_signed_in? && current_user.admin? %>
              <%= link_to "üóë", skill_path(skill),
                    data: { "turbo-method": :delete, "turbo-confirm": "Supprimer cette comp√©tence ?" },
                    class: "btn" %>
            <% end %>
            <div class="skill-card">
              <div class="skill-inner">
                <div class="skill-front d-flex justify-content-center align-items-center">
                  <span class="fw-bold"><%= skill.name %></span>
                </div>
                <div class="skill-back d-flex flex-column justify-content-center align-items-center">
                  <p class="mb-0"><strong>Niveau :</strong> <%= skill.level %></p>
                </div>
              </div>
            </div>
          </div>
        <% end %>
      </div>
      <div class="mt-3">
        <% if user_signed_in? && current_user.admin? %>
          <%= link_to "‚ûï Ajouter une comp√©tence", new_skill_path, class: "btn btn-success" %>
        <% end %>
      </div>
    </div>
  </section>
  <!-- LANGUES -->
  <section class="band-surface py-5">
    <div class="container">
      <h2 class="mb-4">üåç Langues</h2>
      <div class="languages-list">
        <% @resume.languages.each do |lang| %>
          <div class="language-item d-flex align-items-center justify-content-between p-2 mb-2 shadow-sm rounded">
            <div class="d-flex align-items-center">
              <% case lang.name.downcase %>
              <% when "fran√ßais" %>
                <span class="fi fi-fr me-3"></span>
              <% when "anglais" %>
                <span class="fi fi-gb me-3"></span>
              <% when "espagnol" %>
                <span class="fi fi-es me-3"></span>
              <% else %>
                <span class="me-3">üåê</span>
              <% end %>
              <div><strong><%= lang.name %></strong> ‚Äî <%= lang.level %></div>
            </div>
            <% if user_signed_in? && current_user.admin? %>
              <%= link_to "‚úèÔ∏è", edit_language_path(lang), class: "btn" %>
            <% end %>
          </div>
        <% end %>
      </div>
    </div>
  </section>
  <!-- CENTRES D‚ÄôINT√âR√äT -->
  <section class="band-surface-alt py-5">
    <div class="container">
      <h2 class="mb-4">üéØ Centres d‚Äôint√©r√™t</h2>
      <div class="interests-list">
        <% @resume.interests.each do |interest| %>
          <div class="interest-item d-flex align-items-center justify-content-between p-3 mb-2 shadow-sm rounded">
            <div class="d-flex align-items-center">
              <% case interest.name.to_s.downcase %>
              <% when "sport" %>
                <span class="me-3">‚öΩ</span>
              <% when "esport" %>
                <span class="me-3">üéÆ</span>
              <% else %>
                <span class="me-3">‚≠ê</span>
              <% end %>
              <div><strong><%= interest.name %></strong> ‚Äî <%= interest.description %></div>
            </div>
            <div class="d-flex align-items-center">
              <% if user_signed_in? && current_user.admin? %>
                <%= link_to "üóë", interest_path(interest),
                      data: { "turbo-method": :delete, "turbo-confirm": "Supprimer ce centre d'int√©r√™t ?" },
                      class: "btn" %>
              <% end %>
            </div>
          </div>
        <% end %>
      </div>
      <div class="mt-3">
        <% if user_signed_in? && current_user.admin? %>
          <%= link_to "‚ûï Ajouter un centre d'int√©r√™t", new_interest_path, class: "btn btn-success" %>
        <% end %>
      </div>
    </div>
  </section>
  <!-- CTA FOOTER -->
  <section class="band-hero text-center py-5">
    <div class="container">
      <%= link_to "üìÇ Voir mes projets", projects_path, class: "btn-pill btn-primary btn-lg px-4 py-3" %>
    </div>
  </section>
</div>
